{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nimport { word, showLoading, page, limit } from \"../main\";\n\nexport async function fetchingFrom() {\n\n  const params = new URLSearchParams({\n    key: '42957626-41f27679caf00334274850a6e',\n    q: word,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: limit,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n\n  showLoading();\n\n  return response.data;\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { elem, lightbox, displayToast } from \"../main\";\n\nexport function render(data) {\n  const images = data.hits;\n\n  const markup = images.map(image => `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n              </a>\n              <div class=\"stats\">\n                <p class=\"text\">Likes<br/>${image.likes}</p>\n                <p class=\"text\">Views<br/>${image.views}</p>\n                <p class=\"text\">Comments<br/>${image.comments}</p>\n                <p class=\"text\">Downloads<br/>${image.downloads}</p>\n              </div>\n            </li>`)\n    .join('');\n  elem.gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\nimport { fetchingFrom } from \"./js/pixabay-api\";\nimport { render } from \"./js/render-functions\";\n\nexport let page = 1;\nexport let limit = 15;\nexport const elem = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.form'),\n  wordInput: document.querySelector('.input'),\n  loader: document.querySelector('.loader'),\n  button: document.querySelector('.btn-load'),\n};\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: \"alt\",\n  captionDelay: 250,\n  overlay: true,\n  overlayOpacity: 0.7,\n});\n\nexport let word = '';\n\nhideLoading();\nhideButton();\n\nelem.form.addEventListener(\"submit\", loadImages);\nelem.button.addEventListener(\"click\", loadPages);\n\nfunction loadImages(e) {\n  e.preventDefault()\n\n  page = 1;\n  elem.gallery.innerHTML = '';\n  word = elem.wordInput.value.trim();\n\n  hideButton();\n\n  if (word !== '') {\n    loadPages();\n  }\n  else {\n    displayToast(\"Please complete the field!\")\n  }\n\n  elem.form.reset();\n};\n\nasync function loadPages() {\n  try {\n    const images = await fetchingFrom();\n    const totalPages = Math.ceil(images.totalHits / limit);\n    page += 1;\n\n    if (images.hits.length === 0) {\n      displayToast(\"Sorry, there are no images matching your search query. Please try again!\");\n      hideLoading();\n    } else if (page >= totalPages) {\n      render(images);\n      hideButton();\n      hideLoading();\n    } else {\n      render(images);\n      hideLoading();\n\n      if (page > 1) {\n        showButton();\n      }\n    }\n\n    const item = document.querySelector('.gallery-item');\n    if (item) {\n      const rect = item.getBoundingClientRect();\n      window.scrollBy({\n        top: rect.height * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    elem.form.reset();\n  } catch (error) {\n    console.error(\"Error loading images:\", error);\n    hideLoading(); \n  }\n};\n\n\n\n\n\nexport function displayToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function showLoading() {\n  elem.loader.style.display = 'block';\n}\n\nfunction hideLoading() {\n  elem.loader.style.display = 'none';\n}\n\nexport function showButton() {\n  elem.button.style.display = 'block';\n}\n\nfunction hideButton() {\n  elem.button.style.display = 'none';\n}"],"names":["fetchingFrom","params","word","page","limit","response","axios","showLoading","render","data","markup","image","elem","lightbox","SimpleLightbox","hideLoading","hideButton","loadImages","loadPages","displayToast","images","totalPages","showButton","item","rect","error","message","iziToast"],"mappings":"owBAKO,eAAeA,GAAe,CAEnC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGC,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CACd,CAAG,EAEKC,EAAW,MAAMC,EAAM,IAAI,4BAA4BL,CAAM,EAAE,EAErE,OAAAM,IAEOF,EAAS,IAClB,CCdO,SAASG,EAAOC,EAAM,CAG3B,MAAMC,EAFSD,EAAK,KAEE,IAAIE,GAAS;AAAA,8CACSA,EAAM,aAAa;AAAA,kDACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,4CAG5CA,EAAM,KAAK;AAAA,4CACXA,EAAM,KAAK;AAAA,+CACRA,EAAM,QAAQ;AAAA,gDACbA,EAAM,SAAS;AAAA;AAAA,kBAE7C,EACb,KAAK,EAAE,EACVC,EAAK,QAAQ,mBAAmB,YAAaF,CAAM,EAEnDG,EAAS,QAAO,CAClB,CCfO,IAAIV,EAAO,EACPC,EAAQ,GACZ,MAAMQ,EAAO,CAClB,QAAS,SAAS,cAAc,UAAU,EAC1C,KAAM,SAAS,cAAc,OAAO,EACpC,UAAW,SAAS,cAAc,QAAQ,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,OAAQ,SAAS,cAAc,WAAW,CAC5C,EAEaC,EAAW,IAAIC,EAAe,gBAAiB,CAC1D,aAAc,MACd,aAAc,IACd,QAAS,GACT,eAAgB,EAClB,CAAC,EAEM,IAAIZ,EAAO,GAElBa,IACAC,IAEAJ,EAAK,KAAK,iBAAiB,SAAUK,CAAU,EAC/CL,EAAK,OAAO,iBAAiB,QAASM,CAAS,EAE/C,SAASD,EAAW,EAAG,CACrB,EAAE,eAAgB,EAElBd,EAAO,EACPS,EAAK,QAAQ,UAAY,GACzBV,EAAOU,EAAK,UAAU,MAAM,KAAI,EAEhCI,IAEId,IAAS,GACXgB,IAGAC,EAAa,4BAA4B,EAG3CP,EAAK,KAAK,OACZ,CAEA,eAAeM,GAAY,CACzB,GAAI,CACF,MAAME,EAAS,MAAMpB,IACfqB,EAAa,KAAK,KAAKD,EAAO,UAAYhB,CAAK,EACrDD,GAAQ,EAEJiB,EAAO,KAAK,SAAW,GACzBD,EAAa,0EAA0E,EACvFJ,KACSZ,GAAQkB,GACjBb,EAAOY,CAAM,EACbJ,IACAD,MAEAP,EAAOY,CAAM,EACbL,IAEIZ,EAAO,GACTmB,KAIJ,MAAMC,EAAO,SAAS,cAAc,eAAe,EACnD,GAAIA,EAAM,CACR,MAAMC,EAAOD,EAAK,wBAClB,OAAO,SAAS,CACd,IAAKC,EAAK,OAAS,EACnB,SAAU,QAClB,CAAO,CACF,CAEDZ,EAAK,KAAK,OACX,OAAQa,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CV,GACD,CACH,CAMO,SAASI,EAAaO,EAAS,CACpCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,UACd,CAAG,CACH,CAEO,SAASnB,GAAc,CAC5BK,EAAK,OAAO,MAAM,QAAU,OAC9B,CAEA,SAASG,GAAc,CACrBH,EAAK,OAAO,MAAM,QAAU,MAC9B,CAEO,SAASU,GAAa,CAC3BV,EAAK,OAAO,MAAM,QAAU,OAC9B,CAEA,SAASI,GAAa,CACpBJ,EAAK,OAAO,MAAM,QAAU,MAC9B"}